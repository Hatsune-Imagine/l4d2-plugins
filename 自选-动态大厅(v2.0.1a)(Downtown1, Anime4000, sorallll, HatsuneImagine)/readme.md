# 动态大厅



原作者来源：https://github.com/umlka/l4d2



原作者插件会根据游戏模式进行判断，如果为对抗或清道夫，则满8人后移除大厅，其余模式满4人后移除大厅。

且会动态设置 `sv_allow_lobby_connect_only` 的值，导致会有这种情况的发生：大厅被移除，但此cvar的值是1，导致想加入的玩家加入时出现“此会话已不可用”的提示，从而无法加入游戏。



本次修改共计：

1. 设置为满4人后即移除大厅（不会影响玩家匹配，即使大厅被移除后，路人玩家仍能正常快速匹配进入。如使用了8人大厅mod且是第一个加入服务器的玩家，服务器仍能正常匹配进入8个路人玩家）。

2. 移除了将 `sv_allow_lobby_connect_only` 设为1的逻辑，仅保留设为0的逻辑。

3. 将 `OnClientPutInServer()` 方法改为 `OnClientConnected()`。
